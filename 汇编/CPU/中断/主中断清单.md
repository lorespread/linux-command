### BIOS 中断 `int` 指令详解

BIOS 中断（`int` 指令）是 x86 架构中与硬件和底层系统交互的重要接口。每个中断都有对应的功能编号（即中断服务号），用于指定系统要执行的操作。

BIOS 提供一套标准中断接口，通过调用这些接口，可以与底层硬件进行交互，比如显示、键盘、磁盘、内存、系统控制等操作。

以下是常见的 BIOS 中断及其功能编号。

---

## 1. **`int 10h`：BIOS 视频服务中断**

`int 10h` 是与显示相关的重要中断，用来控制显示模式、光标定位、屏幕输出、清屏等。

### 常见功能号（AH 寄存器）：

| 功能号 (AH) | 功能描述                      |
|-------------|--------------------------------|
| `00h`        | 设置显示模式（Video Mode）   |
| `01h`        | 设置光标开/关（Cursor ON/OFF）|
| `02h`        | 移动光标位置（定位光标）     |
| `03h`        | 获取当前光标位置             |
| `0Ah`        | 输出字符到屏幕               |
| `13h`        | 读取/写入显示内存            |

**示例：设置显示模式为文本模式 80x25**

```asm
mov ax, 0003h   ; 设置功能号为 0003h：标准文本模式 80x25。
int 10h         ; 调用 BIOS 显示中断。
```

---

## 2. **`int 13h`：BIOS 磁盘服务中断**

`int 13h` 是磁盘相关的中断服务接口，提供磁盘读写操作、初始化、格式化等功能。

### 常见功能号（AH 寄存器）：

| 功能号 (AH) | 功能描述                      |
|-------------|--------------------------------|
| `00h`        | 读取扇区                        |
| `02h`        | 写入扇区                        |
| `03h`        | 读取磁盘参数                  |
| `04h`        | 重新初始化磁盘                  |

**示例：读取磁盘扇区**

```asm
mov ah, 00h    ; AH = 00h：读取磁盘扇区。
mov al, 1      ; AL = 扇区编号。
mov ch, 0      ; Cylinder。
mov cl, 1      ; Sector。
mov dh, 0      ; Head。
mov dl, 0      ; 磁盘编号。
int 13h         ; 调用 BIOS 磁盘服务。
```

---

## 3. **`int 14h`：BIOS 串口服务中断（Serial Port）**

`int 14h` 是串口通信接口，可用于串口数据的发送和接收。

### 常见功能号（AH 寄存器）：

| 功能号 (AH) | 功能描述                      |
|-------------|--------------------------------|
| `00h`        | 初始化串口                    |
| `01h`        | 发送数据到串口                |
| `02h`        | 接收串口数据                 |

---

## 4. **`int 15h`：系统服务中断（System Services）**

`int 15h` 提供与系统相关的服务，比如电源管理、设备检测、系统信息获取等。

### 常见功能号（AH 寄存器）：

| 功能号 (AH) | 功能描述                      |
|-------------|--------------------------------|
| `00h`        | 获取系统信息                  |
| `04h`        | 电源管理接口                  |
| `EAX`        | 获取硬件信息                  |

**示例：获取系统信息**

```asm
mov ah, 00h    ; AH = 00h：获取系统信息。
int 15h         ; 调用 BIOS 系统服务。
```

---

## 5. **`int 16h`：BIOS 键盘与输入服务中断（Keyboard/Input）**

`int 16h` 用于与键盘相关操作，例如检测按键、输入字符等。

### 常见功能号（AH 寄存器）：

| 功能号 (AH) | 功能描述                      |
|-------------|--------------------------------|
| `00h`        | 检测是否有按键输入            |
| `01h`        | 检测按键状态                 |
| `02h`        | 读取键盘字符                  |
| `03h`        | 获取键盘状态和按键信息      |

**示例：读取键盘字符**

```asm
mov ah, 00h    ; 检测是否有按键。
int 16h         ; BIOS 键盘服务中断。
```

---

## 6. **`int 1Ah`：系统计时器中断（Real-Time Clock）**

`int 1Ah` 提供与系统时间、计时器相关的操作接口。

### 常见功能号（AH 寄存器）：

| 功能号 (AH) | 功能描述                      |
|-------------|--------------------------------|
| `00h`        | 获取当前时间                 |
| `02h`        | 设置系统时间                 |

**示例：获取系统时间**

```asm
mov ah, 00h    ; 功能号：获取当前系统时间。
int 1Ah         ; BIOS 系统计时器服务。
```

---

## BIOS 中断常见编号总结：

| BIOS 中断编号 | 功能                             |
|----------------|------------------------------------|
| `int 10h`      | 显示相关中断                     |
| `int 13h`      | 磁盘读写操作                     |
| `int 14h`      | 串口通信操作                     |
| `int 15h`      | 系统服务接口                     |
| `int 16h`      | 键盘输入与检测接口               |
| `int 1Ah`      | 系统计时器与时间管理接口         |

---

### 总结：

- **BIOS 中断（`int` 指令）** 是底层系统与硬件交互的主要接口。
- 每个 `int` 对应不同的功能编号，选择适当的编号可以完成具体操作。
- 使用 BIOS 中断时，通常需要 **设置寄存器参数**，并调用指定中断号（例如：`int 10h`、`int 13h`）。
- 在模拟器（如 QEMU）中，应该注意模拟参数设置和对应中断兼容性。

希望这些介绍能够帮助你更好地理解 BIOS 的中断接口及其功能！
