在汇编语言中，`div` 指令是用于无符号整数除法运算的指令。它的作用是将一个被除数除以除数，计算商和余数。`div` 指令的使用比较特殊，涉及到特定的寄存器，并且不同操作数的位宽会影响运算结果的存放位置。

### `div` 指令概述

`div` 指令执行无符号整数除法，它的基本语法如下：

```assembly
div <divisor>
```

- **被除数**：`div` 指令使用的是隐式寄存器，其中被除数通常存储在 `AX`（16 位）、`DX:AX`（32 位）或者 `EDX:EAX`（64 位）寄存器对中，取决于运算的大小。
- **除数**：`divisor` 是指令的操作数，表示除数。

### `div` 指令的工作原理

`div` 指令的基本工作流程如下：

1. **16 位除法**：
   - **被除数**：`AX`（16 位）
   - **除数**：一个 16 位的值
   - **商**：存放在 `AL` 寄存器中（低 8 位）
   - **余数**：存放在 `AH` 寄存器中（高 8 位）

2. **32 位除法**：
   - **被除数**：`DX:AX`（32 位）
   - **除数**：一个 16 位的值
   - **商**：存放在 `AX` 寄存器中（低 16 位）
   - **余数**：存放在 `DX` 寄存器中（高 16 位）

3. **64 位除法**：
   - **被除数**：`EDX:EAX`（64 位）
   - **除数**：一个 32 位的值
   - **商**：存放在 `EAX` 寄存器中（低 32 位）
   - **余数**：存放在 `EDX` 寄存器中（高 32 位）

### 基本格式

```assembly
div <divisor>
```

在执行除法时，`div` 指令将被除数除以除数，结果存储在相应的寄存器中：

- **商** 存储在 `AL`（8 位）、`AX`（16 位）、`EAX`（32 位）等寄存器中。
- **余数** 存储在 `AH`（8 位）、`DX`（16 位）、`EDX`（32 位）等寄存器中。

### 示例 1:16 位除法

假设我们要进行一个 16 位无符号整数除法运算，将 `AX` 中的 16 位数除以 16，并得到商和余数。

#### 示例代码：

```assembly
mov ax, 20       ; AX = 20
mov bl, 4        ; BL = 4
div bl            ; AX / BL -> 商存放在 AL，余数存放在 AH
```

- **解释**：
  - `AX = 20`，即 16 位的被除数为 20（十进制）。
  - `BL = 4`，即 16 位的除数为 4。
  - 执行 `div bl` 后：
    - `AL`（商）：`20 / 4 = 5`，商为 `5`（存放在 `AL`）。
    - `AH`（余数）：`20 % 4 = 0`，余数为 `0`（存放在 `AH`）。

#### 执行后的寄存器值：
- `AX = 5`（商存放在 `AL`，`AH` 为余数 `0`）。

### 示例 2:32 位除法

假设我们要进行 32 位无符号整数除法，将 `EDX:EAX` 中的 32 位数除以 16，并得到商和余数。

#### 示例代码：

```assembly
mov eax, 1234567890   ; EAX = 1234567890
mov edx, 0            ; EDX = 0
mov ecx, 100000000    ; ECX = 100000000 (除数)
div ecx               ; EDX:EAX / ECX -> 商存放在 EAX，余数存放在 EDX
```

- **解释**：
  - `EAX = 1234567890`，即 32 位的被除数。
  - `EDX = 0`，32 位被除数的高 32 位（因为 32 位数存储在 `EDX:EAX` 中，所以 `EDX` 设置为 0）。
  - `ECX = 100000000`，即 32 位的除数。
  - 执行 `div ecx` 后：
    - 商存放在 `EAX` 中，余数存放在 `EDX` 中。

#### 执行后的寄存器值：
- `EAX = 12`（商）。
- `EDX = 34567890`（余数）。

### 示例 3:64 位除法

假设我们要进行 64 位无符号整数除法，将 `EDX:EAX` 中的 64 位数除以 16，并得到商和余数。

#### 示例代码：

```assembly
mov eax, 1234567890   ; EAX = 1234567890
mov edx, 0            ; EDX = 0
mov ecx, 16           ; ECX = 16 (除数)
div ecx               ; EDX:EAX / ECX -> 商存放在 EAX，余数存放在 EDX
```

- **解释**：
  - `EDX:EAX` 中的 64 位数是 `1234567890`。
  - `ECX = 16` 是除数。
  - 执行 `div ecx` 后：
    - 商存放在 `EAX`，余数存放在 `EDX`。

#### 执行后的寄存器值：
- `EAX = 77160493`（商）。
- `EDX = 2`（余数）。

### `div` 与 `idiv` 的区别

- **`div`**：执行无符号整数除法。
- **`idiv`**：执行带符号整数除法（带符号除法指令）。

它们的操作方式类似，但 `idiv` 在处理符号时会进行符号扩展，以正确处理负数。

### 小结

- **`div`** 指令用于无符号整数除法，操作数通常是寄存器或内存中的值。
- `div` 通过隐式寄存器（如 `AX`, `DX`, `EAX`, `EDX`）来存储被除数和除数的结果。
- 除法的结果会分别存储在商和余数寄存器中。
