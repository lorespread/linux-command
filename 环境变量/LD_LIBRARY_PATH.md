# 1 LD_LIBRARY_PATH 介绍

`LD_LIBRARY_PATH` 是一个在 Unix-like 操作系统中使用的环境变量，用于指定动态链接器搜索共享库时应当查看的目录路径。动态链接器用于加载程序所需的共享库（动态库，如 `.so` 文件），而 `LD_LIBRARY_PATH` 提供了一个方式来指定额外的搜索路径，这些路径在程序启动时会被动态链接器检查。

### 作用

-   **库搜索路径**：当程序运行时，动态链接器使用 `LD_LIBRARY_PATH` 中列出的目录来查找共享库，这些目录在系统标准库路径（如 `/lib` 或 `/usr/lib`）之前被检查。
-   **解决库依赖**：它常被用来解决库版本冲突或者是在非标准位置安装的库的依赖问题。
-   **开发和测试**：开发者常用它来测试程序对新版本库的兼容性，而无需替换系统中已有的库版本。

### 格式

`LD_LIBRARY_PATH` 的值是由冒号（`:`）分隔的目录列表。例如，如果你想添加 `/home/user/mylibs` 和 `/opt/libs` 到搜索路径，可以设置：

```bash
export LD_LIBRARY_PATH=/home/user/mylibs:/opt/libs:$LD_LIBRARY_PATH
```

这里 `$LD_LIBRARY_PATH` 在末尾确保之前设置的路径不被覆盖。

### 使用注意事项

-   **安全性**：频繁使用或不当设置 `LD_LIBRARY_PATH` 可能会带来安全风险，因为它允许运行时动态加载非标准路径下的库，可能会误加载恶意库。
-   **依赖隔离**：为了避免全局影响，更推荐使用如 `rpath` 或 `runpath` 链接选项来为单个程序设置库搜索路径，而不是依赖于 `LD_LIBRARY_PATH`。
-   **覆盖系统库**：使用此变量可能导致一些意外覆盖系统库的情况，可能会引起系统不稳定或者程序行为异常。

总之，虽然 `LD_LIBRARY_PATH` 是一个强大的工具，可以帮助解决动态链接库的查找和加载问题，但需要谨慎使用，避免可能引入的安全问题和系统稳定性风险。在部署生产环境应用时，尽可能寻找更稳定和安全的方法来管理库依赖。
